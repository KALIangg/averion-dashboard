<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Averion Dashboard v3.0</title>
    
    <!-- Firebase v8 -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    
    <!-- Monaco Editor -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.0/min/vs/loader.min.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ================= RESET & BASE ================= */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #ff003c; /* Vermelho neon */
            --primary-dark: #cc002f;
            --primary-glow: rgba(255, 0, 60, 0.5);
            --secondary: #151823;
            --dark: #0b0d12;
            --darker: #000000;
            --light: #e6e6eb;
            --lighter: #f0f0f5;
            --gray: #2a2d3a;
            --success: #00c853;
            --warning: #ff9800;
            --danger: #ff003c;
            --info: #2196f3;
            --border: rgba(255, 0, 60, 0.2);
            --border-glow: rgba(255, 0, 60, 0.4);
            --shadow: 0 8px 32px rgba(255, 0, 60, 0.3);
            --shadow-glow: 0 0 20px rgba(255, 0, 60, 0.5);
            --radius: 12px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--darker);
            color: var(--light);
            min-height: 100vh;
            position: relative;
            overflow: hidden;
        }
        
        /* ================= LOGIN SCREEN ================= */
        #login {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(15px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: var(--transition-slow);
        }
        
        .login-container {
            width: 100%;
            max-width: 420px;
            padding: 20px;
            animation: slideUp 0.7s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .login-card {
            background: rgba(21, 24, 35, 0.9);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 40px 30px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5), var(--shadow);
            backdrop-filter: blur(25px);
            position: relative;
            overflow: hidden;
            transition: var(--transition-slow);
        }
        
        .login-logo {
            font-size: 3.5rem;
            color: var(--primary);
            margin-bottom: 25px;
            display: flex;
            justify-content: center;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); filter: drop-shadow(0 0 10px var(--primary-glow)); }
            50% { transform: scale(1.05); filter: drop-shadow(0 0 20px var(--primary-glow)); }
        }
        
        .login-title {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--light) 0%, var(--primary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        .input-field {
            width: 100%;
            padding: 16px 20px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            color: var(--light);
            font-size: 1rem;
            transition: var(--transition);
            margin-bottom: 20px;
        }
        
        .btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: var(--radius);
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(255, 0, 60, 0.4), var(--shadow-glow);
        }
        
        /* ================= HEADER ================= */
        header {
            background: rgba(11, 13, 18, 0.9);
            backdrop-filter: blur(25px);
            border-bottom: 1px solid var(--border);
            padding: 18px 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 800;
            font-size: 1.5rem;
            color: var(--light);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .status-badge {
            background: var(--gray);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            transition: var(--transition);
        }
        
        .status-badge.online {
            background: rgba(0, 200, 83, 0.2);
            color: var(--success);
            box-shadow: 0 0 15px rgba(0, 200, 83, 0.3);
        }
        
        .btn-icon {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            color: var(--light);
            padding: 12px 24px;
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }
        
        .btn-icon:hover {
            background: rgba(255, 0, 60, 0.15);
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        /* ================= DASHBOARD LAYOUT ================= */
        .dashboard-container {
            display: grid;
            grid-template-columns: 280px 1fr;
            min-height: calc(100vh - 76px);
        }
        
        /* ================= SIDEBAR ================= */
        .sidebar {
            background: rgba(11, 13, 18, 0.9);
            backdrop-filter: blur(25px);
            border-right: 1px solid var(--border);
            padding-top: 100px; /* Espaço para mover as tabs para baixo */
            display: flex;
            flex-direction: column;
            gap: 5px;
            box-shadow: 5px 0 20px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        /* Sidebar header/title */
        .sidebar-header {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 80px;
            display: flex;
            align-items: center;
            padding: 0 30px;
            background: rgba(255, 0, 60, 0.1);
            border-bottom: 1px solid var(--border);
        }
        
        .sidebar-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .nav-btn {
            padding: 20px 30px;
            background: transparent;
            border: none;
            color: #a0a0c0;
            cursor: pointer;
            font-weight: 700;
            font-size: 1rem;
            position: relative;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 15px;
            text-align: left;
            letter-spacing: 0.5px;
            margin: 0 10px;
            border-radius: var(--radius);
            overflow: hidden;
        }
        
        .nav-btn:hover {
            color: var(--light);
            background: rgba(255, 255, 255, 0.05);
            transform: translateX(5px);
            box-shadow: inset 3px 0 0 var(--primary);
        }
        
        .nav-btn.active {
            color: var(--primary);
            background: rgba(255, 0, 60, 0.1);
            box-shadow: inset 4px 0 0 var(--primary), 0 5px 15px rgba(255, 0, 60, 0.1);
            transform: translateX(5px);
        }
        
        /* ================= MODE SELECTOR STYLES ================= */
        .mode-selector {
            display: flex;
            gap: 5px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 3px;
        }

        .mode-btn {
            padding: 10px 20px;
            background: transparent;
            border: none;
            border-radius: calc(var(--radius) - 2px);
            color: #a0a0c0;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }

        .mode-btn:hover {
            background: rgba(255, 255, 255, 0.08);
            color: var(--light);
        }

        .mode-btn.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 0, 60, 0.3);
        }

        .mode-btn i {
            font-size: 1rem;
        }

        /* Indicador de status do modo */
        .mode-status {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 10px;
        }

        .mode-status.clientside {
            background: rgba(33, 150, 243, 0.2);
            color: var(--info);
        }

        .mode-status.serverside {
            background: rgba(0, 200, 83, 0.2);
            color: var(--success);
        }

        /* Aviso de backdoor necessário */
        .backdoor-warning {
            display: none;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            background: rgba(255, 152, 0, 0.1);
            border: 1px solid var(--warning);
            border-radius: var(--radius);
            margin-top: 10px;
            animation: fadeIn 0.3s ease;
        }

        .backdoor-warning i {
            color: var(--warning);
        }

        .backdoor-warning span {
            font-size: 0.85rem;
            color: var(--warning);
        }

        .backdoor-warning.show {
            display: flex;
        }
        
        /* ================= MAIN CONTENT ================= */
        .main-content {
            padding: 30px;
            overflow: hidden; /* Remove overflow do content principal */
            display: flex;
            flex-direction: column;
        }
        
        .section {
            display: none;
            flex-direction: column;
            height: 100%;
            animation: fadeIn 0.5s ease;
            background: rgba(11, 13, 18, 0.7);
            backdrop-filter: blur(15px);
            border-radius: var(--radius);
            padding: 25px;
            border: 1px solid var(--border);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            flex: 1;
            min-height: 0; /* Importante para flex container */
        }
        
        .section.active {
            display: flex;
        }
        
        /* ================= DASHBOARD SECTION - SCROLL CUSTOMIZADO ================= */
        .dashboard-section-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden; /* Remove scroll nativo */
        }
        
        .dashboard-header {
            margin-bottom: 25px;
            flex-shrink: 0;
        }
        
        .dashboard-scroll-container {
            flex: 1;
            overflow: hidden;
            position: relative;
        }
        
        .dashboard-content {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        /* Custom scrollbar for dashboard */
        .dashboard-content::-webkit-scrollbar {
            width: 8px;
        }
        
        .dashboard-content::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 10px;
        }
        
        .dashboard-content::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-radius: 10px;
        }
        
        .dashboard-content::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--primary-dark) 0%, #b3002a 100%);
        }
        
        /* Hide scrollbar for Firefox */
        .dashboard-content {
            scrollbar-width: thin;
            scrollbar-color: var(--primary) rgba(255, 255, 255, 0.02);
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }
        
        .card {
            background: rgba(21, 24, 35, 0.8);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 25px;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: 0 15px 35px rgba(255, 0, 60, 0.2);
        }
        
        .card-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--light);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card-title i {
            color: var(--primary);
        }
        
        .feature-list {
            list-style: none;
            margin-top: 15px;
        }
        
        .feature-list li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            gap: 10px;
            color: #a0a0c0;
        }
        
        .feature-list li i {
            color: var(--primary);
            font-size: 0.9rem;
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        
        .stat {
            text-align: center;
            padding: 15px;
            background: rgba(255, 0, 60, 0.05);
            border: 1px solid rgba(255, 0, 60, 0.1);
            border-radius: var(--radius);
            transition: var(--transition);
        }
        
        .stat:hover {
            background: rgba(255, 0, 60, 0.1);
            transform: scale(1.05);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #a0a0c0;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* ================= EDITOR SECTION ================= */
        #editor-container {
            flex: 1;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            overflow: hidden;
            background: #1e1e1e;
            min-height: 400px;
            margin-bottom: 25px;
        }
        
        .editor-controls {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            padding: 14px 32px;
            border-radius: var(--radius);
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
            font-size: 1rem;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 0, 60, 0.4), var(--shadow-glow);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            color: var(--light);
            padding: 14px 32px;
            border-radius: var(--radius);
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
            font-size: 1rem;
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }
        
        /* ================= SCRIPT TABS SYSTEM ================= */
        .script-tabs-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .script-tabs-header {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
            min-height: 50px;
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
        }
        
        .script-tabs {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
            flex: 1;
        }
        
        .script-tab {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: 8px 8px 0 0;
            color: #a0a0c0;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            min-width: 120px;
            max-width: 200px;
            position: relative;
        }
        
        .script-tab:hover {
            background: rgba(255, 255, 255, 0.08);
        }
        
        .script-tab.active {
            background: rgba(255, 0, 60, 0.1);
            border-color: var(--primary);
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
        }
        
        .tab-close-btn {
            background: none;
            border: none;
            color: inherit;
            cursor: pointer;
            padding: 2px 5px;
            border-radius: 3px;
            font-size: 0.8rem;
            transition: var(--transition);
            margin-left: auto;
        }
        
        .tab-close-btn:hover {
            background: rgba(255, 0, 60, 0.2);
            color: var(--danger);
        }
        
        /* ================= SCRIPT HUB SECTION ================= */
        .script-hub-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        
        .script-card {
            background: rgba(21, 24, 35, 0.8);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 25px;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        
        .script-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: 0 15px 35px rgba(255, 0, 60, 0.2);
        }
        
        .script-icon {
            width: 60px;
            height: 60px;
            background: rgba(255, 0, 60, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            color: var(--primary);
            font-size: 1.8rem;
        }
        
        .script-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--light);
        }
        
        .script-description {
            font-size: 0.9rem;
            color: #a0a0c0;
            line-height: 1.5;
            margin-bottom: 15px;
        }
        
        .script-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
        }
        
        .script-tag {
            background: rgba(255, 0, 60, 0.1);
            color: var(--primary);
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        /* ================= PLAYERS SECTION ================= */
        .players-container {
            display: flex;
            flex: 1;
            gap: 25px;
            overflow: hidden;
            height: 100%;
        }
        
        .players-list {
            flex: 0 0 350px;
            background: rgba(21, 24, 35, 0.8);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
        }
        
        .player-search {
            margin-bottom: 20px;
            position: relative;
            flex-shrink: 0;
        }
        
        .search-input {
            width: 100%;
            padding: 14px 16px 14px 45px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            color: var(--light);
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .search-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(255, 0, 60, 0.1);
            outline: none;
        }
        
        .player-search i {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary);
        }
        
        .players-list-content {
            flex: 1;
            overflow-y: auto;
            padding-right: 5px;
            max-height: calc(100vh - 300px);
            min-height: 300px;
        }
        
        .player-item {
            padding: 18px;
            margin-bottom: 12px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .player-item:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 0, 60, 0.1);
        }
        
        .player-item.selected {
            background: rgba(255, 0, 60, 0.1);
            border-color: var(--primary);
            box-shadow: 0 5px 20px rgba(255, 0, 60, 0.2);
            transform: translateY(-3px);
        }
        
        .player-info {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .player-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 16px;
            box-shadow: 0 0 15px rgba(255, 0, 60, 0.3);
        }
        
        .player-details h4 {
            font-size: 1.1rem;
            margin-bottom: 5px;
            color: var(--light);
        }
        
        /* ================= ACTION SCROLL SYSTEM ================= */
        .player-actions {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 30px;
            overflow: hidden;
            min-width: 0;
        }
        
        .action-section {
            background: rgba(21, 24, 35, 0.8);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 25px;
            flex: 1;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            min-height: 250px;
            overflow: hidden;
        }
        
        .action-scroll-container {
            position: relative;
            flex: 1;
            overflow: hidden;
            border-radius: var(--radius);
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border);
            margin-top: 15px;
        }
        
        .action-scroll {
            display: flex;
            gap: 15px;
            padding: 20px;
            overflow-x: auto;
            overflow-y: hidden;
            scroll-behavior: smooth;
            height: 100%;
            min-height: 200px;
            align-items: center;
            scrollbar-width: thin;
            scrollbar-color: var(--primary) rgba(255, 255, 255, 0.05);
        }
        
        .action-scroll::-webkit-scrollbar {
            height: 8px;
        }
        
        .action-scroll::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin: 0 20px;
        }
        
        .action-scroll::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-radius: 10px;
        }
        
        .action-scroll::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--primary-dark) 0%, #b3002a 100%);
        }
        
        .scroll-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(11, 13, 18, 0.95);
            border: 1px solid var(--border);
            color: var(--primary);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: var(--transition);
            opacity: 0.9;
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            display: none;
        }
        
        .scroll-btn:hover {
            background: rgba(255, 0, 60, 0.2);
            border-color: var(--primary);
            opacity: 1;
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 0 20px rgba(255, 0, 60, 0.3);
        }
        
        .scroll-left {
            left: 10px;
        }
        
        .scroll-right {
            right: 10px;
        }
        
        .scroll-btn i {
            font-size: 1.2rem;
        }
        
        .action-scroll-container:hover .scroll-btn {
            display: flex;
        }
        
        .section-header {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .section-header i {
            color: var(--primary);
            font-size: 1.3rem;
        }
        
        /* Action buttons in scroll container */
        .action-btn {
            flex: 0 0 auto;
            width: 160px;
            height: 130px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            color: var(--light);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 12px;
            text-align: center;
            position: relative;
            overflow: hidden;
            padding: 15px;
        }
        
        .action-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 0, 60, 0.1), transparent);
            transition: var(--transition);
        }
        
        .action-btn:hover::before {
            left: 100%;
        }
        
        .action-btn:hover {
            background: rgba(255, 0, 60, 0.15);
            border-color: var(--primary);
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 25px rgba(255, 0, 60, 0.2);
        }
        
        .action-btn i {
            font-size: 2.2rem;
            transition: var(--transition);
        }
        
        .action-btn:hover i {
            transform: scale(1.2);
        }
        
        .action-btn span {
            font-size: 0.95rem;
            font-weight: 600;
            line-height: 1.2;
        }
        
        .action-btn.danger {
            background: rgba(255, 0, 60, 0.1);
            border-color: var(--danger);
        }
        
        .action-btn.danger:hover {
            background: rgba(255, 0, 60, 0.2);
        }
        
        .action-btn.warning {
            background: rgba(255, 152, 0, 0.1);
            border-color: var(--warning);
        }
        
        .action-btn.warning:hover {
            background: rgba(255, 152, 0, 0.2);
        }
        
        .action-btn.success {
            background: rgba(0, 200, 83, 0.1);
            border-color: var(--success);
        }
        
        .action-btn.success:hover {
            background: rgba(0, 200, 83, 0.2);
        }
        
        .action-btn.disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }
        
        .action-btn.disabled:hover {
            transform: none;
            background: rgba(255, 255, 255, 0.03);
            border-color: var(--border);
            box-shadow: none;
        }
        
        .action-btn.toggle-btn.active {
            background: rgba(255, 0, 60, 0.2);
            box-shadow: 0 0 20px rgba(255, 0, 60, 0.3);
        }
        
        /* ================= LOGS SECTION ================= */
        #logBox {
            flex: 1;
            background: rgba(21, 24, 35, 0.8);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 20px;
            overflow-y: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.3);
        }
        
        /* Custom scrollbar for logs */
        #logBox::-webkit-scrollbar {
            width: 8px;
        }
        
        #logBox::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 10px;
        }
        
        #logBox::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-radius: 10px;
        }
        
        #logBox::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--primary-dark) 0%, #b3002a 100%);
        }
        
        /* Hide scrollbar for Firefox in logs */
        #logBox {
            scrollbar-width: thin;
            scrollbar-color: var(--primary) rgba(255, 255, 255, 0.02);
        }
        
        .log-entry {
            padding: 14px;
            margin-bottom: 12px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.02);
            border-left: 4px solid var(--gray);
            animation: slideIn 0.3s ease;
        }
        
        .log-entry.info {
            border-left-color: var(--info);
            background: rgba(33, 150, 243, 0.05);
        }
        
        .log-entry.success {
            border-left-color: var(--success);
            background: rgba(0, 200, 83, 0.05);
        }
        
        .log-entry.warning {
            border-left-color: var(--warning);
            background: rgba(255, 152, 0, 0.05);
        }
        
        .log-entry.error {
            border-left-color: var(--danger);
            background: rgba(255, 0, 60, 0.05);
        }
        
        .log-entry.exec {
            border-left-color: var(--primary);
            background: rgba(255, 0, 60, 0.05);
        }
        
        /* ================= ANIMATIONS ================= */
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        /* ================= RESPONSIVE ================= */
        @media (max-width: 1024px) {
            .dashboard-container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                display: none;
            }
        }
        
        @media (max-width: 768px) {
            .dashboard-grid,
            .script-hub-grid {
                grid-template-columns: 1fr;
            }
            
            .editor-controls {
                flex-direction: column;
            }
            
            .btn-primary,
            .btn-secondary {
                width: 100%;
            }
            
            .players-container {
                flex-direction: column;
            }
            
            .players-list {
                width: 100%;
                max-height: 300px;
            }
            
            .action-btn {
                width: 140px;
                height: 120px;
            }
            
            .action-btn i {
                font-size: 2rem;
            }
        }
    </style>
</head>

<body>
    <!-- Login Screen -->
    <div id="login">
        <div class="login-container">
            <div class="login-card">
                <div class="login-logo">
                    <i class="fas fa-terminal"></i>
                </div>
                <h1 class="login-title">AverionX Dashboard</h1>
                <p class="login-subtitle" style="color: #a0a0c0; margin-bottom: 35px;">v3.0 • Sistema de Controle Avançado</p>
                
                <input type="password" id="key" class="input-field" placeholder="Digite sua chave de acesso" autocomplete="off">
                
                <button class="btn" onclick="login()">
                    <i class="fas fa-sign-in-alt"></i>
                    Acessar Sistema
                </button>
                
                <div id="err" style="color: var(--danger); margin-top: 20px;"></div>
            </div>
        </div>
    </div>
    
    <!-- Main Interface -->
    <header>
        <div style="display: flex; align-items: center; gap: 20px;">
            <div class="logo">
                <i class="fas fa-terminal"></i>
                AverionX
            </div>
            <div id="statusBadge" class="status-badge offline">
                <i class="fas fa-circle"></i>
                Offline
            </div>
        </div>
        
        <div>
            <button class="btn-icon" onclick="connectExecutor()">
                <i class="fas fa-plug"></i>
                Conectar Executor
            </button>
        </div>
    </header>
    
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">
                    <i class="fas fa-bars"></i>
                    Menu de Navegação
                </div>
            </div>
            
            <button class="nav-btn active" onclick="showSection('dashboard')">
                <i class="fas fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </button>
            <button class="nav-btn" onclick="showSection('editor')">
                <i class="fas fa-code"></i>
                <span>Editor Lua</span>
            </button>
            <button class="nav-btn" onclick="showSection('script-hub')">
                <i class="fas fa-cube"></i>
                <span>Script Hub</span>
            </button>
            <button class="nav-btn" onclick="showSection('players')">
                <i class="fas fa-users"></i>
                <span>Players</span>
            </button>
            <button class="nav-btn" onclick="showSection('logs')">
                <i class="fas fa-clipboard-list"></i>
                <span>Logs</span>
            </button>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Dashboard Section -->
            <div id="dashboard" class="section active">
                <div class="dashboard-section-container">
                    <div class="dashboard-header">
                        <h1 style="color: var(--primary); margin-bottom: 10px; font-size: 2.2rem;">Dashboard AverionX</h1>
                        <p style="color: #a0a0c0; margin-bottom: 15px;">Sistema avançado de execução e injeção no Roblox</p>
                        
                        <div class="stats-container">
                            <div class="stat">
                                <div class="stat-value">&lt;2ms</div>
                                <div class="stat-label">Injeção</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value">99.9%</div>
                                <div class="stat-label">Uptime</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value">24/7</div>
                                <div class="stat-label">Suporte</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value">100%</div>
                                <div class="stat-label">Seguro</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dashboard-scroll-container">
                        <div class="dashboard-content">
                            <div class="dashboard-grid">
                                <div class="card">
                                    <div class="card-title">
                                        <i class="fas fa-bolt"></i>
                                        Funcionalidades Principales
                                    </div>
                                    <ul class="feature-list">
                                        <li><i class="fas fa-check"></i> Injeção Automática</li>
                                        <li><i class="fas fa-check"></i> Dashboard Web</li>
                                        <li><i class="fas fa-check"></i> Menu EXE Integrado</li>
                                        <li><i class="fas fa-check"></i> Script Hub</li>
                                        <li><i class="fas fa-check"></i> Editor Avançado</li>
                                        <li><i class="fas fa-check"></i> Segurança Máxima</li>
                                    </ul>
                                </div>
                                
                                <div class="card">
                                    <div class="card-title">
                                        <i class="fas fa-rocket"></i>
                                        Status do Sistema
                                    </div>
                                    <div style="margin-top: 20px;">
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <span style="color: #a0a0c0;">Executor:</span>
                                            <span id="executorStatus" style="color: var(--danger);">Desconectado</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <span style="color: #a0a0c0;">Backdoor:</span>
                                            <span id="backdoorStatus" style="color: var(--danger);">Não Detectado</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <span style="color: #a0a0c0;">Jogadores Online:</span>
                                            <span id="playersOnline" style="color: var(--success);">0</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between;">
                                            <span style="color: #a0a0c0;">Scripts Carregados:</span>
                                            <span id="scriptsLoaded" style="color: var(--info);">0</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card">
                                    <div class="card-title">
                                        <i class="fas fa-play-circle"></i>
                                        Ações Rápidas
                                    </div>
                                    <div style="margin-top: 20px; display: grid; gap: 10px;">
                                        <button class="btn-secondary" onclick="connectMenu()" style="width: 100%;">
                                            <i class="fas fa-play"></i>
                                            Conectar Client
                                        </button>
                                        <button class="btn-secondary" onclick="injectRoblox()" style="width: 100%;">
                                            <i class="fas fa-syringe"></i>
                                            Injectar Roblox
                                        </button>
                                        <button class="btn-secondary" onclick="clearConsole()" style="width: 100%;">
                                            <i class="fas fa-eraser"></i>
                                            Limpar Console
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="card">
                                    <div class="card-title">
                                        <i class="fas fa-info-circle"></i>
                                        Informações do Sistema
                                    </div>
                                    <div style="margin-top: 20px; font-size: 0.9rem; color: #a0a0c0;">
                                        <p><strong>Versão:</strong> v3.0 Beta</p>
                                        <p><strong>Última Atualização:</strong> <span id="lastUpdate">Hoje</span></p>
                                        <p><strong>Status:</strong> <span id="systemStatus">Operacional</span></p>
                                        <p><strong>Conectado como:</strong> <span id="userStatus">Nenhum</span></p>
                                    </div>
                                </div>
                                
                                <!-- Additional cards to demonstrate scroll -->
                                <div class="card">
                                    <div class="card-title">
                                        <i class="fas fa-shield-alt"></i>
                                        Segurança
                                    </div>
                                    <div style="margin-top: 20px; font-size: 0.9rem; color: #a0a0c0;">
                                        <p>Sistema protegido com criptografia AES-256</p>
                                        <p>Autenticação de dois fatores disponível</p>
                                        <p>Logs de todas as atividades</p>
                                        <p>Proteção contra injeção maliciosa</p>
                                    </div>
                                </div>
                                
                                <div class="card">
                                    <div class="card-title">
                                        <i class="fas fa-chart-line"></i>
                                        Estatísticas
                                    </div>
                                    <div style="margin-top: 20px;">
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <span style="color: #a0a0c0;">Execuções Hoje:</span>
                                            <span style="color: var(--primary); font-weight: 600;">0</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <span style="color: #a0a0c0;">Tempo Médio:</span>
                                            <span style="color: var(--primary); font-weight: 600;">0ms</span>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <span style="color: #a0a0c0;">Sucesso:</span>
                                            <span style="color: var(--success); font-weight: 600;">100%</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card">
                                    <div class="card-title">
                                        <i class="fas fa-cogs"></i>
                                        Configurações
                                    </div>
                                    <div style="margin-top: 20px; font-size: 0.9rem; color: #a0a0c0;">
                                        <p>Modo Cliente/Server ativo</p>
                                        <p>Auto-save habilitado</p>
                                        <p>Notificações em tempo real</p>
                                        <p>Tema escuro padrão</p>
                                    </div>
                                </div>
                                
                                <div class="card">
                                    <div class="card-title">
                                        <i class="fas fa-history"></i>
                                        Histórico
                                    </div>
                                    <div style="margin-top: 20px; font-size: 0.9rem; color: #a0a0c0;">
                                        <p><strong>Última conexão:</strong> Agora</p>
                                        <p><strong>Último script:</strong> Nenhum</p>
                                        <p><strong>Backup automático:</strong> Ativo</p>
                                        <p><strong>Versão anterior:</strong> v2.5</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Editor Section -->
            <div id="editor" class="section">
                <h1 style="color: var(--primary); margin-bottom: 20px; font-size: 2.2rem;">Editor Lua Avançado</h1>
                <p style="color: #a0a0c0; margin-bottom: 30px;">Escreva e execute scripts Lua para o Roblox</p>
                
                <!-- ===== SELETOR DE MODO ===== -->
                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 25px; padding: 15px; background: rgba(255, 0, 60, 0.05); border: 1px solid var(--border); border-radius: var(--radius);">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-cogs" style="color: var(--primary); font-size: 1.2rem;"></i>
                        <h3 style="font-size: 1rem; color: var(--light); font-weight: 600;">Modo de Execução:</h3>
                    </div>
                    
                    <div style="display: flex; gap: 10px; margin-left: auto;">
                        <div class="mode-selector">
                            <button id="modeClientBtn" class="mode-btn active" onclick="setMode('clientside')">
                                <i class="fas fa-desktop"></i>
                                ClientSide
                            </button>
                            <button id="modeServerBtn" class="mode-btn" onclick="setMode('serverside')">
                                <i class="fas fa-server"></i>
                                ServerSide
                            </button>
                        </div>
                        
                        <div class="mode-info" id="modeInfo" style="display: flex; align-items: center; gap: 8px; padding: 8px 15px; background: rgba(255, 0, 60, 0.1); border-radius: var(--radius); border-left: 3px solid var(--primary);">
                            <i class="fas fa-info-circle" style="color: var(--primary);"></i>
                            <span style="font-size: 0.85rem; color: #a0a0c0;">Execução local no cliente</span>
                        </div>
                    </div>
                </div>
                <!-- ===== FIM DO SELETOR DE MODO ===== -->
                
                <div class="script-tabs-container">
                    <div class="script-tabs-header">
                        <div class="script-tabs" id="scriptTabs">
                            <!-- Script tabs will be generated here -->
                        </div>
                        <div style="display: flex; gap: 10px; margin-left: auto;">
                            <button class="btn-secondary" onclick="addNewScriptTab()" style="padding: 8px 12px; font-size: 0.85rem;">
                                <i class="fas fa-plus"></i>
                                Novo Script
                            </button>
                            <button class="btn-secondary" onclick="saveCurrentScript()" style="padding: 8px 12px; font-size: 0.85rem;">
                                <i class="fas fa-save"></i>
                                Salvar
                            </button>
                        </div>
                    </div>
                    
                    <div id="editor-container"></div>
                </div>
                
                <div class="editor-controls">
                    <button class="btn-primary" onclick="execute()" id="executeBtn">
                        <i class="fas fa-play"></i>
                        Executar Código (ClientSide)
                    </button>
                    <button class="btn-secondary" onclick="clearEditor()">
                        <i class="fas fa-eraser"></i>
                        Limpar Editor
                    </button>
                    <button class="btn-secondary" onclick="saveAllScripts()">
                        <i class="fas fa-download"></i>
                        Exportar Todos
                    </button>
                </div>
            </div>
            
            <!-- Script Hub Section -->
            <div id="script-hub" class="section">
                <h1 style="color: var(--primary); margin-bottom: 20px; font-size: 2.2rem;">Script Hub</h1>
                <p style="color: #a0a0c0; margin-bottom: 30px;">Biblioteca de scripts populares para o Roblox</p>
                
                <div class="script-hub-grid">
                    <div class="script-card" onclick="loadScriptFromHub('Infinite Yield')">
                        <div class="script-icon">
                            <i class="fas fa-infinity"></i>
                        </div>
                        <div class="script-title">Infinite Yield</div>
                        <div class="script-description">Admin FE com mais de 100 comandos. O mais popular executor de admin.</div>
                        <div class="script-tags">
                            <span class="script-tag">Admin</span>
                            <span class="script-tag">FE</span>
                            <span class="script-tag">Popular</span>
                        </div>
                    </div>
                    
                    <div class="script-card" onclick="loadScriptFromHub('Dark Dex')">
                        <div class="script-icon">
                            <i class="fas fa-eye"></i>
                        </div>
                        <div class="script-title">Dark Dex</div>
                        <div class="script-description">Explorer avançado para inspecionar e manipular o jogo.</div>
                        <div class="script-tags">
                            <span class="script-tag">Explorer</span>
                            <span class="script-tag">Debug</span>
                            <span class="script-tag">Avançado</span>
                        </div>
                    </div>
                    
                    <div class="script-card" onclick="loadScriptFromHub('Remote Spy')">
                        <div class="script-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="script-title">Remote Spy</div>
                        <div class="script-description">Monitora RemoteEvents e RemoteFunctions em tempo real.</div>
                        <div class="script-tags">
                            <span class="script-tag">Security</span>
                            <span class="script-tag">Monitor</span>
                            <span class="script-tag">Network</span>
                        </div>
                    </div>
                    
                    <div class="script-card" onclick="loadScriptFromHub('Simple ESP')">
                        <div class="script-icon">
                            <i class="fas fa-crosshairs"></i>
                        </div>
                        <div class="script-title">Simple ESP</div>
                        <div class="script-description">ESP básico para ver jogadores através das paredes.</div>
                        <div class="script-tags">
                            <span class="script-tag">Visual</span>
                            <span class="script-tag">ESP</span>
                            <span class="script-tag">Wallhack</span>
                        </div>
                    </div>
                    
                    <div class="script-card" onclick="loadScriptFromHub('Aimbot')">
                        <div class="script-icon">
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <div class="script-title">Aimbot</div>
                        <div class="script-description">Aimbot avançado com várias configurações e smooth.</div>
                        <div class="script-tags">
                            <span class="script-tag">Combat</span>
                            <span class="script-tag">Aimbot</span>
                            <span class="script-tag">FPS</span>
                        </div>
                    </div>
                    
                    <div class="script-card" onclick="loadScriptFromHub('Fly Script')">
                        <div class="script-icon">
                            <i class="fas fa-feather-alt"></i>
                        </div>
                        <div class="script-title">Fly Script</div>
                        <div class="script-description">Script de voo com controles suaves e configurações.</div>
                        <div class="script-tags">
                            <span class="script-tag">Movement</span>
                            <span class="script-tag">Fly</span>
                            <span class="script-tag">Utility</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Players Section -->
            <div id="players" class="section">
                <h1 style="color: var(--primary); margin-bottom: 20px; font-size: 2.2rem;">Players</h1>
                <p style="color: #a0a0c0; margin-bottom: 30px;">Gerenciamento de jogadores online</p>
                
                <div class="players-container">
                    <div class="players-list">
                        <div class="player-search">
                            <i class="fas fa-search"></i>
                            <input type="text" class="search-input" id="playerSearch" placeholder="Buscar jogador..." onkeyup="filterPlayers()">
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid var(--border);">
                            <h3 style="font-size: 1.1rem; color: var(--light); display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-users"></i> Jogadores Online
                            </h3>
                            <div id="playerCount" style="background: rgba(255, 0, 60, 0.2); color: var(--primary); padding: 4px 10px; border-radius: 20px; font-size: 0.8rem; font-weight: 600;">
                                0 jogadores
                            </div>
                        </div>
                        <div class="players-list-content" id="playersList">
                            <!-- Player list will be populated here -->
                        </div>
                    </div>
                    
                    <div class="player-actions">
                        <div class="action-section">
                            <div class="section-header">
                                <i class="fas fa-desktop" style="color: var(--primary); font-size: 1.3rem;"></i>
                                <h3 style="font-size: 1.2rem; color: var(--light); font-weight: 700;">Ações ClientSide</h3>
                            </div>
                            <div class="action-scroll-container">
                                <div id="clientActions" class="action-scroll">
                                    <!-- Client actions will be populated here -->
                                </div>
                                <button class="scroll-btn scroll-left" onclick="scrollActions('client', -1)">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button class="scroll-btn scroll-right" onclick="scrollActions('client', 1)">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="action-section">
                            <div class="section-header">
                                <i class="fas fa-server" style="color: var(--primary); font-size: 1.3rem;"></i>
                                <h3 style="font-size: 1.2rem; color: var(--light); font-weight: 700;">Ações ServerSide</h3>
                            </div>
                            <div class="action-scroll-container">
                                <div id="serverActions" class="action-scroll">
                                    <!-- Server actions will be populated here -->
                                </div>
                                <button class="scroll-btn scroll-left" onclick="scrollActions('server', -1)">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button class="scroll-btn scroll-right" onclick="scrollActions('server', 1)">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Logs Section -->
            <div id="logs" class="section">
                <h1 style="color: var(--primary); margin-bottom: 20px; font-size: 2.2rem;">Logs do Sistema</h1>
                <p style="color: #a0a0c0; margin-bottom: 30px;">Registro de todas as atividades do sistema</p>
                
                <div style="display: flex; gap: 15px; margin-bottom: 20px;">
                    <button class="btn-secondary" onclick="clearLogs()">
                        <i class="fas fa-trash"></i>
                        Limpar Logs
                    </button>
                    <button class="btn-secondary" onclick="exportLogs()">
                        <i class="fas fa-download"></i>
                        Exportar Logs
                    </button>
                </div>
                
                <div id="logBox"></div>
            </div>
        </div>
    </div>
    
    <script>
        /* ================= FIREBASE CONFIGURATION ================= */
        const firebaseConfig = {
            apiKey: "AIzaSyBRIVl3JKnKia__tJGh04FSO80SClceLE4",
            authDomain: "averiondashboard.firebaseapp.com",
            databaseURL: "https://averiondashboard-default-rtdb.firebaseio.com",
            projectId: "averiondashboard",
            storageBucket: "averiondashboard.firebasestorage.app",
            messagingSenderId: "774317269450",
            appId: "1:774317269450:web:a84c6d91b00dac187aef33",
            measurementId: "G-WMMVEZL0KP"
        };
        
        // Inicializar Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        
        /* ================= STATE VARIABLES ================= */
        let EXECUTOR_ID = null;
        let MODE = "clientside";
        let CHALLENGE = null;
        let editor = null;
        let logs = [];
        let selectedPlayer = null;
        let selectedTrigger = null;
        let backdoorDetected = false;
        
        /* ================= SCRIPT TABS SYSTEM ================= */
        let scripts = [];
        let currentScriptId = null;
        const STORAGE_KEY = 'averionx_scripts';
        
        // Configuração centralizada dos botões
        const ACTIONS_CONFIG = {
            clientside: [
                {
                    id: 'tp',
                    name: 'TP',
                    icon: 'fa-location-arrow',
                    type: 'normal',
                    category: 'teleport',
                    tooltip: 'Teleportar para o jogador selecionado'
                },
                {
                    id: 'view',
                    name: 'VIEW',
                    icon: 'fa-eye',
                    type: 'toggle',
                    category: 'view',
                    tooltip: 'Alternar visualização do jogador',
                    defaultState: false
                },
                {
                    id: 'loopTp',
                    name: 'LOOP TP',
                    icon: 'fa-sync',
                    type: 'toggle',
                    category: 'teleport',
                    tooltip: 'Teleporte contínuo para o jogador',
                    defaultState: false
                },
                {
                    id: 'pull',
                    name: 'Puxar',
                    icon: 'fa-hand-paper',
                    type: 'normal',
                    category: 'movement',
                    tooltip: 'Puxar o jogador para sua posição'
                },
                {
                    id: 'bringAll',
                    name: 'Bring All',
                    icon: 'fa-users',
                    type: 'toggle',
                    category: 'teleport',
                    tooltip: 'Trazer todos os jogadores para você',
                    defaultState: false,
                    requiresAllPlayers: true
                },
                {
                    id: 'fling',
                    name: 'Fling',
                    icon: 'fa-wind',
                    type: 'toggle',
                    category: 'fun',
                    tooltip: 'Jogar o jogador para longe',
                    defaultState: false
                },
                {
                    id: 'bang',
                    name: 'Bang',
                    icon: 'fa-fire',
                    type: 'normal',
                    category: 'fun',
                    tooltip: 'Explodir o jogador'
                },
                {
                    id: 'esp',
                    name: 'ESP',
                    icon: 'fa-eye-low-vision',
                    type: 'toggle',
                    category: 'visual',
                    tooltip: 'Ativar ESP (Wallhack)',
                    defaultState: false
                },
                {
                    id: 'noclip',
                    name: 'NoClip',
                    icon: 'fa-walking',
                    type: 'toggle',
                    category: 'movement',
                    tooltip: 'Ativar modo NoClip',
                    defaultState: false
                },
                {
                    id: 'speed',
                    name: 'Speed',
                    icon: 'fa-tachometer-alt',
                    type: 'toggle',
                    category: 'movement',
                    tooltip: 'Aumentar velocidade',
                    defaultState: false
                },
                {
                    id: 'fly',
                    name: 'Fly',
                    icon: 'fa-feather-alt',
                    type: 'toggle',
                    category: 'movement',
                    tooltip: 'Ativar modo de voo',
                    defaultState: false
                }
            ],
            
            serverside: [
                {
                    id: 'kill',
                    name: 'Kill',
                    icon: 'fa-skull-crossbones',
                    type: 'normal',
                    category: 'admin',
                    tooltip: 'Matar o jogador',
                    requiresBackdoor: true
                },
                {
                    id: 'bringFE',
                    name: 'Bring (FE)',
                    icon: 'fa-magnet',
                    type: 'normal',
                    category: 'admin',
                    tooltip: 'Trazer jogador (FE Bypass)',
                    requiresBackdoor: true
                },
                {
                    id: 'ban',
                    name: 'Ban',
                    icon: 'fa-ban',
                    type: 'normal',
                    category: 'admin',
                    tooltip: 'Banir jogador do jogo',
                    requiresBackdoor: true
                },
                {
                    id: 'kick',
                    name: 'Kick',
                    icon: 'fa-door-open',
                    type: 'normal',
                    category: 'admin',
                    tooltip: 'Expulsar jogador do jogo',
                    requiresBackdoor: true
                },
                {
                    id: 'respawn',
                    name: 'Respawn',
                    icon: 'fa-redo',
                    type: 'normal',
                    category: 'admin',
                    tooltip: 'Ressuscitar jogador',
                    requiresBackdoor: true
                },
                {
                    id: 'jail',
                    name: 'Jail',
                    icon: 'fa-gavel',
                    type: 'normal',
                    category: 'admin',
                    tooltip: 'Prender jogador',
                    requiresBackdoor: true
                },
                {
                    id: 'freeze',
                    name: 'Freeze',
                    icon: 'fa-snowflake',
                    type: 'toggle',
                    category: 'admin',
                    tooltip: 'Congelar jogador',
                    requiresBackdoor: true,
                    defaultState: false
                },
                {
                    id: 'god',
                    name: 'God Mode',
                    icon: 'fa-shield-alt',
                    type: 'toggle',
                    category: 'admin',
                    tooltip: 'Ativar modo Deus',
                    requiresBackdoor: true,
                    defaultState: false
                },
                {
                    id: 'invisible',
                    name: 'Invisível',
                    icon: 'fa-eye-slash',
                    type: 'toggle',
                    category: 'admin',
                    tooltip: 'Tornar jogador invisível',
                    requiresBackdoor: true,
                    defaultState: false
                },
                {
                    id: 'tpToMe',
                    name: 'TP To Me',
                    icon: 'fa-user-plus',
                    type: 'normal',
                    category: 'admin',
                    tooltip: 'Teleportar jogador para você',
                    requiresBackdoor: true
                }
            ]
        };
        
        // Estados dos toggles
        let activeToggles = {};
        
        /* ================= CHALLENGE SYSTEM ================= */
        db.ref("auth/challenge").once("value", s => {
            CHALLENGE = s.val();
            log("Sistema de autenticação carregado", "info");
        });
        
        /* ================= LOGIN SYSTEM ================= */
        async function login() {
            const key = document.getElementById('key').value.trim();
            const err = document.getElementById('err');
            
            if (!key) {
                err.textContent = 'Digite uma chave de acesso';
                return;
            }
            
            if (!CHALLENGE) {
                err.textContent = 'Erro ao carregar sistema de autenticação';
                return;
            }
            
            try {
                const hash = await sha256(key + CHALLENGE);
                db.ref("auth/hashes/" + hash).once("value", snapshot => {
                    if (snapshot.exists()) {
                        // Login successful
                        document.getElementById('login').style.opacity = '0';
                        setTimeout(() => {
                            document.getElementById('login').style.display = 'none';
                        }, 500);
                        
                        document.getElementById('statusBadge').className = 'status-badge online';
                        document.getElementById('statusBadge').innerHTML = '<i class="fas fa-circle"></i> Online';
                        document.getElementById('userStatus').textContent = 'Admin';
                        
                        log("Autenticado com sucesso", "success");
                        
                        // Initialize systems
                        initializeToggles();
                        initializeEditor();
                        initializeActions();
                        loadScripts();
                        
                        // Inicializar modo
                        setMode('clientside');
                        
                        // Atualizar dashboard
                        updateDashboard();
                    } else {
                        err.textContent = 'Chave de acesso inválida';
                    }
                });
            } catch (error) {
                err.textContent = 'Erro durante a autenticação';
                console.error('Login error:', error);
            }
        }
        
        async function sha256(message) {
            const encoder = new TextEncoder();
            const data = encoder.encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', data);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }
        
        // Allow login with Enter key
        document.getElementById('key').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                login();
            }
        });
        
        /* ================= EDITOR SYSTEM ================= */
        function initializeEditor() {
            require.config({ 
                paths: { 
                    vs: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.0/min/vs' 
                } 
            });
            
            require(["vs/editor/editor.main"], () => {
                editor = monaco.editor.create(document.getElementById('editor-container'), {
                    value: `-- AverionX Dashboard v3.0\n-- Sistema de execução remota\n\nprint("Bem-vindo ao AverionX!")\n\n-- Exemplo de código\nlocal player = game.Players.LocalPlayer\nif player then\n    print("Player encontrado:", player.Name)\n    player.Character.Humanoid.WalkSpeed = 50\nend\n\n-- Auto-execute\nlocal function main()\n    print("Script executado com sucesso!")\nend\n\nmain()`,
                    language: "lua",
                    theme: "vs-dark",
                    automaticLayout: true,
                    fontSize: 14,
                    minimap: { enabled: true },
                    scrollBeyondLastLine: false,
                    wordWrap: "on",
                    lineNumbers: "on",
                    roundedSelection: false
                });
                
                log("Editor Lua inicializado", "success");
                
                // Auto-save on content change
                let saveTimeout;
                editor.onDidChangeModelContent(() => {
                    if (saveTimeout) clearTimeout(saveTimeout);
                    saveTimeout = setTimeout(() => {
                        saveCurrentScript();
                    }, 2000);
                });
            });
        }
        
        /* ================= SCRIPT TABS SYSTEM ================= */
        function loadScripts() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                try {
                    scripts = JSON.parse(saved);
                } catch (e) {
                    scripts = [];
                    localStorage.removeItem(STORAGE_KEY);
                }
            }
            
            if (scripts.length === 0) {
                addNewScriptTab(true);
            } else {
                currentScriptId = scripts[0].id;
                renderScriptTabs();
                loadScriptContent(scripts[0].id);
            }
            
            updateScriptsCount();
        }
        
        function saveScripts() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(scripts));
            updateScriptsCount();
        }
        
        function renderScriptTabs() {
            const tabsContainer = document.getElementById('scriptTabs');
            tabsContainer.innerHTML = '';
            
            scripts.forEach(script => {
                const tab = document.createElement('div');
                tab.className = `script-tab ${script.id === currentScriptId ? 'active' : ''}`;
                tab.dataset.scriptId = script.id;
                
                tab.innerHTML = `
                    <i class="fas fa-file-code"></i>
                    <span class="tab-title">${script.name}</span>
                    <button class="tab-close-btn" onclick="closeScriptTab('${script.id}', event)">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                
                tab.onclick = (e) => {
                    if (!e.target.classList.contains('tab-close-btn') && !e.target.closest('.tab-close-btn')) {
                        switchToScript(script.id);
                    }
                };
                
                tabsContainer.appendChild(tab);
            });
        }
        
        function addNewScriptTab(isDefault = false) {
            const scriptId = 'script_' + Date.now();
            const scriptName = isDefault ? 'Script Principal' : `Script ${scripts.length + 1}`;
            const defaultContent = isDefault ? 
                `-- AverionX Dashboard v3.0\n-- Sistema de execução remota\n\nprint("Bem-vindo ao AverionX!")\n\n-- Exemplo de código\nlocal player = game.Players.LocalPlayer\nif player then\n    print("Player encontrado:", player.Name)\n    player.Character.Humanoid.WalkSpeed = 50\nend\n\n-- Auto-execute\nlocal function main()\n    print("Script executado com sucesso!")\nend\n\nmain()` :
                `-- Novo Script\n-- Digite seu código aqui...`;
            
            const newScript = {
                id: scriptId,
                name: scriptName,
                content: defaultContent,
                lastModified: Date.now()
            };
            
            scripts.push(newScript);
            currentScriptId = scriptId;
            saveScripts();
            renderScriptTabs();
            
            if (editor) {
                editor.setValue(defaultContent);
            }
            
            log(`Novo script criado: ${scriptName}`, "success");
            updateScriptsCount();
        }
        
        function switchToScript(scriptId) {
            const script = scripts.find(s => s.id === scriptId);
            if (!script) return;
            
            if (currentScriptId && editor) {
                const currentScript = scripts.find(s => s.id === currentScriptId);
                if (currentScript) {
                    currentScript.content = editor.getValue();
                    currentScript.lastModified = Date.now();
                }
            }
            
            currentScriptId = scriptId;
            renderScriptTabs();
            loadScriptContent(scriptId);
            log(`Carregado: ${script.name}`, "info");
        }
        
        function loadScriptContent(scriptId) {
            const script = scripts.find(s => s.id === scriptId);
            if (!script || !editor) return;
            
            editor.setValue(script.content || '');
        }
        
        function saveCurrentScript() {
            if (!currentScriptId || !editor) {
                log("Nenhum script selecionado para salvar", "warning");
                return;
            }
            
            const script = scripts.find(s => s.id === currentScriptId);
            if (script) {
                script.content = editor.getValue();
                script.lastModified = Date.now();
                saveScripts();
                log(`Script "${script.name}" salvo com sucesso`, "success");
            }
        }
        
        function closeScriptTab(scriptId, event) {
            if (event) event.stopPropagation();
            
            if (scripts.length <= 1) {
                log("Você não pode fechar o último script", "warning");
                return;
            }
            
            const script = scripts.find(s => s.id === scriptId);
            if (script && confirm(`Fechar script "${script.name}"?`)) {
                const index = scripts.findIndex(s => s.id === scriptId);
                scripts.splice(index, 1);
                
                if (scriptId === currentScriptId) {
                    currentScriptId = scripts.length > 0 ? scripts[Math.max(0, index - 1)].id : null;
                }
                
                saveScripts();
                renderScriptTabs();
                
                if (currentScriptId && editor) {
                    loadScriptContent(currentScriptId);
                }
                
                log(`Script "${script.name}" fechado`, "info");
                updateScriptsCount();
            }
        }
        
        function updateScriptsCount() {
            document.getElementById('scriptsLoaded').textContent = scripts.length;
        }
        
        /* ================= MODE MANAGEMENT FUNCTIONS ================= */
        function setMode(mode) {
            MODE = mode;
            
            // Atualizar botões do seletor
            document.getElementById('modeClientBtn').classList.toggle('active', mode === 'clientside');
            document.getElementById('modeServerBtn').classList.toggle('active', mode === 'serverside');
            
            // Atualizar informações do modo
            const modeInfo = document.getElementById('modeInfo');
            if (mode === 'clientside') {
                modeInfo.innerHTML = `
                    <i class="fas fa-info-circle" style="color: var(--primary);"></i>
                    <span style="font-size: 0.85rem; color: #a0a0c0;">
                        Execução local no cliente do jogador
                    </span>
                `;
                modeInfo.style.borderLeftColor = 'var(--primary)';
                modeInfo.style.background = 'rgba(255, 0, 60, 0.1)';
            } else {
                modeInfo.innerHTML = `
                    <i class="fas fa-info-circle" style="color: var(--warning);"></i>
                    <span style="font-size: 0.85rem; color: #a0a0c0;">
                        Execução no servidor do jogo (requer backdoor)
                    </span>
                `;
                modeInfo.style.borderLeftColor = 'var(--warning)';
                modeInfo.style.background = 'rgba(255, 152, 0, 0.1)';
            }
            
            // Mostrar/ocultar aviso de backdoor
            const backdoorWarning = document.createElement('div');
            backdoorWarning.id = 'backdoorWarning';
            backdoorWarning.className = `backdoor-warning ${mode === 'serverside' && !backdoorDetected ? 'show' : ''}`;
            backdoorWarning.innerHTML = `
                <i class="fas fa-exclamation-triangle"></i>
                <span>Modo ServerSide requer backdoor detectado. Atualmente: ${backdoorDetected ? '✅ Detectado' : '❌ Não detectado'}</span>
            `;
            
            // Atualizar ou criar o aviso
            const existingWarning = document.getElementById('backdoorWarning');
            if (existingWarning) {
                existingWarning.remove();
            }
            
            if (mode === 'serverside' && !backdoorDetected) {
                const modeSelectorContainer = document.querySelector('.mode-selector').parentElement.parentElement;
                modeSelectorContainer.appendChild(backdoorWarning);
            }
            
            // Atualizar logs
            log(`Modo alterado para: ${mode}`, "info");
            
            // Atualizar botão de execução
            updateExecuteButton();
        }

        function updateExecuteButton() {
            const executeBtn = document.getElementById('executeBtn');
            if (executeBtn) {
                if (MODE === 'serverside' && !backdoorDetected) {
                    executeBtn.innerHTML = `
                        <i class="fas fa-exclamation-triangle"></i>
                        Executar (ServerSide - Sem Backdoor)
                    `;
                    executeBtn.style.background = 'linear-gradient(135deg, var(--warning) 0%, #e68900 100%)';
                    executeBtn.title = 'Modo ServerSide ativo, mas nenhum backdoor detectado. O script pode não funcionar.';
                } else {
                    executeBtn.innerHTML = `
                        <i class="fas fa-play"></i>
                        Executar ${MODE === 'serverside' ? '(ServerSide)' : '(ClientSide)'}
                    `;
                    executeBtn.style.background = 'linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%)';
                    executeBtn.title = `Executar código no modo ${MODE}`;
                }
            }
        }

        function checkAndUpdateMode() {
            // Atualizar aviso de backdoor se necessário
            if (MODE === 'serverside') {
                const warning = document.getElementById('backdoorWarning');
                if (warning) {
                    warning.innerHTML = `
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>Modo ServerSide requer backdoor detectado. Atualmente: ${backdoorDetected ? '✅ Detectado' : '❌ Não detectado'}</span>
                    `;
                    warning.classList.toggle('show', !backdoorDetected);
                }
                updateExecuteButton();
            }
        }
        
        /* ================= ACTION SYSTEM ================= */
        function initializeToggles() {
            ACTIONS_CONFIG.clientside.forEach(action => {
                if (action.type === 'toggle') {
                    activeToggles[action.id] = action.defaultState || false;
                }
            });
            
            ACTIONS_CONFIG.serverside.forEach(action => {
                if (action.type === 'toggle') {
                    activeToggles[action.id] = action.defaultState || false;
                }
            });
            
            renderAllActions();
        }
        
        function scrollActions(type, direction) {
            const container = document.getElementById(`${type}Actions`);
            if (!container) return;
            
            const scrollAmount = 300;
            container.scrollBy({
                left: direction * scrollAmount,
                behavior: 'smooth'
            });
        }
        
        function createActionButton(action, mode) {
            const button = document.createElement('div');
            
            let buttonClass = 'action-btn';
            if (action.type === 'toggle') {
                buttonClass += ' toggle-btn';
                if (activeToggles[action.id]) {
                    buttonClass += ' active';
                }
            }
            
            if (action.category) {
                buttonClass += ` ${action.category}`;
            }
            
            button.className = buttonClass;
            button.id = `${action.id}Btn`;
            
            const isDisabled = checkButtonDisabled(action, mode);
            if (isDisabled) {
                button.classList.add('disabled');
            }
            
            button.innerHTML = `
                <i class="fas ${action.icon}"></i>
                <span>${action.name} ${action.type === 'toggle' ? (activeToggles[action.id] ? 'ON' : 'OFF') : ''}</span>
            `;
            
            if (action.tooltip) {
                button.title = action.tooltip;
            }
            
            if (!isDisabled) {
                button.onclick = () => handleActionClick(action, mode);
            }
            
            return button;
        }
        
        function checkButtonDisabled(action, mode) {
            if (mode === 'serverside' && action.requiresBackdoor && !backdoorDetected) {
                return true;
            }
            
            if (!selectedPlayer && !action.requiresAllPlayers) {
                return true;
            }
            
            return false;
        }
        
        function handleActionClick(action, mode) {
            if (!selectedPlayer && !action.requiresAllPlayers) {
                log("Selecione um jogador primeiro", "warning");
                return;
            }
            
            const playerName = selectedPlayer ? selectedPlayer.Name : 'ALL';
            
            if (action.type === 'toggle') {
                activeToggles[action.id] = !activeToggles[action.id];
                
                const button = document.getElementById(`${action.id}Btn`);
                button.classList.toggle('active');
                button.querySelector('span').textContent = 
                    `${action.name} ${activeToggles[action.id] ? 'ON' : 'OFF'}`;
                
                sendActionCommand(action.id, activeToggles[action.id] ? 'start' : 'stop', mode);
                log(`Toggle ${action.name} ${activeToggles[action.id] ? 'ativado' : 'desativado'} para ${playerName}`, "exec");
                
            } else {
                sendActionCommand(action.id, 'execute', mode);
                log(`Ação ${action.name} executada para ${playerName}`, "exec");
            }
        }
        
        function sendActionCommand(action, state, mode) {
            if (!EXECUTOR_ID) {
                log("Conecte-se a um executor primeiro", "error");
                return;
            }
            
            const playerName = selectedPlayer ? selectedPlayer.Name : 'ALL';
            
            const command = {
                type: 'command',
                action: action,
                target: playerName,
                state: state,
                timestamp: Date.now(),
                mode: mode
            };
            
            sendCommand(command);
        }
        
        function renderAllActions() {
            renderActions('clientside', 'clientActions');
            renderActions('serverside', 'serverActions');
        }
        
        function renderActions(mode, containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            container.innerHTML = '';
            
            const actions = ACTIONS_CONFIG[mode];
            
            actions.forEach(action => {
                const button = createActionButton(action, mode);
                container.appendChild(button);
            });
        }
        
        /* ================= PLAYERS MANAGEMENT ================= */
        function listenPlayers() {
            if (!EXECUTOR_ID) return;
            
            db.ref(`executors/${EXECUTOR_ID}/players`).on("value", snapshot => {
                const players = snapshot.val() || {};
                renderPlayersList(players);
                updatePlayersCount(Object.values(players).length);
            });
        }
        
        function renderPlayersList(players) {
            const playersList = document.getElementById('playersList');
            const playerCount = document.getElementById('playerCount');
            
            playersList.innerHTML = '';
            const playerArray = Object.values(players);
            
            playerCount.textContent = `${playerArray.length} jogador${playerArray.length !== 1 ? 'es' : ''}`;
            
            if (playerArray.length === 0) {
                playersList.innerHTML = `
                    <div class="player-item" style="text-align: center; padding: 40px 20px; background: rgba(255, 255, 255, 0.02); border: 1px dashed var(--border);">
                        <i class="fas fa-users" style="font-size: 2rem; color: var(--primary); margin-bottom: 15px;"></i>
                        <h4 style="color: var(--light); margin-bottom: 10px;">Nenhum jogador online</h4>
                        <p style="color: #a0a0c0; font-size: 0.9rem;">Aguarde os jogadores se conectarem ao jogo</p>
                    </div>
                `;
                return;
            }
            
            playerArray.forEach(player => {
                const playerElement = document.createElement('div');
                playerElement.className = 'player-item';
                playerElement.dataset.userId = player.UserId;
                
                const initials = player.Name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);
                
                playerElement.innerHTML = `
                    <div class="player-info">
                        <div class="player-avatar">${initials}</div>
                        <div class="player-details">
                            <h4>${player.DisplayName || player.Name}</h4>
                            <p>${player.Name} • ID: ${player.UserId}</p>
                        </div>
                    </div>
                `;
                
                playerElement.onclick = () => selectPlayer(player);
                playersList.appendChild(playerElement);
            });
        }
        
        function selectPlayer(player) {
            selectedPlayer = player;
            
            document.querySelectorAll('.player-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            event.currentTarget.classList.add('selected');
            renderAllActions();
            
            log(`Jogador selecionado: ${player.Name} (ID: ${player.UserId})`, "info");
        }
        
        function filterPlayers() {
            const search = document.getElementById('playerSearch').value.toLowerCase();
            const players = document.querySelectorAll('.player-item');
            
            players.forEach(player => {
                const name = player.querySelector('h4').textContent.toLowerCase();
                const details = player.querySelector('p').textContent.toLowerCase();
                
                if (name.includes(search) || details.includes(search)) {
                    player.style.display = 'block';
                } else {
                    player.style.display = 'none';
                }
            });
        }
        
        /* ================= EXECUTOR CONNECTION ================= */
        function connectExecutor() {
            const id = prompt("Executor ID:");
            if (!id) return;
            
            db.ref(`executors/${id}/status`).once("value", snap => {
                if (!snap.exists()) {
                    log("Executor offline ou inexistente", "error");
                    return;
                }
                
                const data = snap.val();
                if (Date.now()/1000 - data.ts > 15) {
                    log("Executor expirado", "warning");
                    return;
                }
                
                EXECUTOR_ID = id;
                document.getElementById('executorStatus').textContent = "Conectado";
                document.getElementById('executorStatus').style.color = "var(--success)";
                
                updateDashboard();
                listenPlayers();
                checkBackdoorStatus();
                log(`Conectado ao executor ${id}`, "success");
            });
        }
        
        function checkBackdoorStatus() {
            if (!EXECUTOR_ID) return;
            
            const command = {
                type: 'special',
                action: 'checkBackdoor',
                timestamp: Date.now()
            };
            
            sendCommand(command, true);
            
            db.ref(`executors/${EXECUTOR_ID}/backdoor`).once("value", snapshot => {
                const result = snapshot.val();
                if (result && result.hasBackdoor) {
                    backdoorDetected = true;
                    document.getElementById('backdoorStatus').textContent = "Detectado";
                    document.getElementById('backdoorStatus').style.color = "var(--success)";
                    renderAllActions();
                    log("Backdoor detectado - Ações ServerSide habilitadas", "warning");
                    
                    // Atualizar interface do modo
                    checkAndUpdateMode();
                } else {
                    backdoorDetected = false;
                    checkAndUpdateMode();
                }
            });
        }
        
        /* ================= DASHBOARD FUNCTIONS ================= */
        function updateDashboard() {
            if (EXECUTOR_ID) {
                document.getElementById('systemStatus').textContent = "Operacional";
                document.getElementById('systemStatus').style.color = "var(--success)";
            }
            
            // Atualizar contagem de jogadores simulada
            if (EXECUTOR_ID) {
                setTimeout(() => {
                    const randomPlayers = Math.floor(Math.random() * 15) + 5;
                    document.getElementById('playersOnline').textContent = randomPlayers;
                }, 1000);
            }
        }
        
        function executeScript() {
            if (!EXECUTOR_ID) {
                log("Conecte-se a um executor primeiro", "error");
                return;
            }
            
            if (!editor) {
                log("Editor não inicializado", "error");
                return;
            }
            
            const code = editor.getValue();
            if (!code.trim()) {
                log("Código vazio", "warning");
                return;
            }
            
            const command = {
                type: 'code',
                code: code,
                mode: MODE,
                timestamp: Date.now()
            };
            
            sendCommand(command);
            log(`Código enviado para execução`, "exec");
        }
        
        function injectRoblox() {
            sendActionCommand('inject', 'inject', 'inject')
        }

        function connectRoblox() {
            sendActionCommand('connect', 'connect', 'connect')
        }
        
        function clearConsole() {
            document.getElementById('logBox').innerHTML = '';
            logs = [];
            log("Console limpo", "info");
        }
        
        /* ================= SCRIPT HUB FUNCTIONS ================= */
        function loadScriptFromHub(scriptName) {
            const scriptsHub = {
                'Infinite Yield': `loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()`,
                'Dark Dex': `loadstring(game:HttpGet("https://raw.githubusercontent.com/infyiff/backup/main/dex.lua"))()`,
                'Remote Spy': `-- Remote Spy v4\n-- Monitor de RemoteEvents\n\nlocal function hookRemote(remote)\n    local oldNamecall\n    oldNamecall = hookmetamethod(game, "__namecall", function(self, ...)\n        local method = getnamecallmethod()\n        if method == "FireServer" or method == "InvokeServer" then\n            local args = {...}\n            print("[" .. method .. "] " .. tostring(self) .. " Args:", unpack(args))\n        end\n        return oldNamecall(self, ...)\n    end)\nend\n\nprint("Remote Spy carregado - Monitorando RemoteEvents")`,
                'Simple ESP': `-- Simple ESP\nlocal Players = game:GetService("Players")\nlocal function createESP(player)\n    if player.Character then\n        local highlight = Instance.new("Highlight")\n        highlight.Parent = player.Character\n        highlight.FillColor = Color3.fromRGB(255, 0, 60)\n        highlight.OutlineColor = Color3.fromRGB(255, 255, 255)\n        highlight.FillTransparency = 0.5\n        highlight.OutlineTransparency = 0\n        print("ESP criado para", player.Name)\n    end\nend\n\nfor _, player in ipairs(Players:GetPlayers()) do\n    if player ~= Players.LocalPlayer then\n        createESP(player)\n    end\nend\n\nprint("Simple ESP carregado")`,
                'Aimbot': `-- Aimbot Simples\nlocal Players = game:GetService("Players")\nlocal RunService = game:GetService("RunService")\nlocal UserInputService = game:GetService("UserInputService")\nlocal LocalPlayer = Players.LocalPlayer\nlocal Camera = workspace.CurrentCamera\n\nlocal aiming = false\nlocal target = nil\n\nlocal function getClosestPlayer()\n    local closest = nil\n    local dist = math.huge\n    for _, player in ipairs(Players:GetPlayers()) do\n        if player ~= LocalPlayer and player.Character then\n            local humanoid = player.Character:FindFirstChild("Humanoid")\n            local head = player.Character:FindFirstChild("Head")\n            if humanoid and humanoid.Health > 0 and head then\n                local screenPos = Camera:WorldToViewportPoint(head.Position)\n                local magnitude = (Vector2.new(screenPos.X, screenPos.Y) - Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)).Magnitude\n                if magnitude < dist then\n                    dist = magnitude\n                    closest = player\n                end\n            end\n        end\n    end\n    return closest\nend\n\nUserInputService.InputBegan:Connect(function(input)\n    if input.UserInputType == Enum.UserInputType.MouseButton2 then\n        aiming = true\n        target = getClosestPlayer()\n    end\nend)\n\nUserInputService.InputEnded:Connect(function(input)\n    if input.UserInputType == Enum.UserInputType.MouseButton2 then\n        aiming = false\n        target = nil\n    end\nend)\n\nRunService.RenderStepped:Connect(function()\n    if aiming and target and target.Character then\n        local head = target.Character:FindFirstChild("Head")\n        if head then\n            Camera.CFrame = CFrame.new(Camera.CFrame.Position, head.Position)\n        end\n    end\nend)\n\nprint("Aimbot carregado - Use o botão direito do mouse")`,
                'Fly Script': `-- Fly Script\nlocal Players = game:GetService("Players")\nlocal UserInputService = game:GetService("UserInputService")\nlocal RunService = game:GetService("RunService")\nlocal LocalPlayer = Players.LocalPlayer\n\nlocal flying = false\nlocal speed = 50\nlocal bodyVelocity\n\nlocal function startFly()\n    flying = true\n    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then\n        bodyVelocity = Instance.new("BodyVelocity")\n        bodyVelocity.Velocity = Vector3.new(0, 0, 0)\n        bodyVelocity.MaxForce = Vector3.new(10000, 10000, 10000)\n        bodyVelocity.Parent = LocalPlayer.Character.HumanoidRootPart\n        \n        print("Fly ativado")\n    end\n}\n\nlocal function stopFly()\n    flying = false\n    if bodyVelocity then\n        bodyVelocity:Destroy()\n        bodyVelocity = nil\n        print("Fly desativado")\n    end\n}\n\nUserInputService.InputBegan:Connect(function(input)\n    if input.KeyCode == Enum.KeyCode.F then\n        if not flying then\n            startFly()\n        else\n            stopFly()\n        end\n    end\nend)\n\nRunService.Stepped:Connect(function()\n    if flying and bodyVelocity and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then\n        local root = LocalPlayer.Character.HumanoidRootPart\n        local newVelocity = Vector3.new(0, 0, 0)\n        \n        if UserInputService:IsKeyDown(Enum.KeyCode.W) then\n            newVelocity = newVelocity + (Camera.CFrame.LookVector * speed)\n        end\n        if UserInputService:IsKeyDown(Enum.KeyCode.S) then\n            newVelocity = newVelocity - (Camera.CFrame.LookVector * speed)\n        end\n        if UserInputService:IsKeyDown(Enum.KeyCode.A) then\n            newVelocity = newVelocity - (Camera.CFrame.RightVector * speed)\n        end\n        if UserInputService:IsKeyDown(Enum.KeyCode.D) then\n            newVelocity = newVelocity + (Camera.CFrame.RightVector * speed)\n        end\n        if UserInputService:IsKeyDown(Enum.KeyCode.Space) then\n            newVelocity = newVelocity + Vector3.new(0, speed, 0)\n        end\n        if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then\n            newVelocity = newVelocity - Vector3.new(0, speed, 0)\n        end\n        \n        bodyVelocity.Velocity = newVelocity\n    end\nend)\n\nprint("Fly Script carregado - Pressione F para ativar/desativar")`
            };
            
            if (editor && scriptsHub[scriptName]) {
                // Carrega o script no editor
                editor.setValue(scriptsHub[scriptName]);
                
                // ===== EXECUTA AUTOMATICAMENTE =====
                if (EXECUTOR_ID) {
                    // Determinar modo baseado no script
                    let mode = 'clientside';
                    if (scriptName === 'Infinite Yield' || scriptName === 'Remote Spy') {
                        // Esses scripts podem funcionar em ambos os modos
                        mode = MODE; // Usar o modo atual
                    }
                    
                    // Envia o código para execução imediata
                    const command = {
                        type: 'code',
                        code: scriptsHub[scriptName],
                        mode: mode,
                        timestamp: Date.now(),
                        fromHub: scriptName
                    };
                    
                    sendCommand(command);
                    log(`Script "${scriptName}" carregado e executado automaticamente (${mode})`, "success");
                } else {
                    log(`Script "${scriptName}" carregado no editor (conecte-se a um executor para executar)`, "warning");
                }
                
                // Adicionar ao sistema de scripts
                const scriptId = 'hub_' + Date.now();
                const newScript = {
                    id: scriptId,
                    name: scriptName,
                    content: scriptsHub[scriptName],
                    lastModified: Date.now(),
                    fromHub: true
                };
                
                scripts.push(newScript);
                currentScriptId = scriptId;
                saveScripts();
                renderScriptTabs();
            } else {
                log(`Script "${scriptName}" não encontrado no hub`, "error");
            }
        }
        
        /* ================= COMMAND EXECUTION ================= */
        function execute() {
            if (!EXECUTOR_ID) {
                log("Conecte-se a um executor primeiro", "error");
                return;
            }
            
            if (!editor) {
                log("Editor não inicializado", "error");
                return;
            }
            
            const code = editor.getValue();
            if (!code.trim()) {
                log("Código vazio", "warning");
                return;
            }
            
            // Aviso se tentar executar ServerSide sem backdoor
            if (MODE === 'serverside' && !backdoorDetected) {
                if (!confirm("⚠️ AVISO: Nenhum backdoor detectado!\n\nO modo ServerSide requer um backdoor para funcionar.\nDeseja continuar mesmo assim?")) {
                    return;
                }
            }
            
            const command = {
                type: 'code',
                code: code,
                mode: MODE,
                timestamp: Date.now()
            };
            
            sendCommand(command);
            log(`Código enviado para execução (${MODE})`, "exec");
        }
        
        function sendCommand(command, isSpecial = false) {
            if (!EXECUTOR_ID) return;
            
            const commandRef = db.ref(`executors/${EXECUTOR_ID}/commands`).push();
            commandRef.set(command);
            
            if (!isSpecial) {
                db.ref("stats/executions").transaction(n => (n || 0) + 1);
            }
        }
        
        function clearEditor() {
            if (editor && confirm("Limpar editor?")) {
                editor.setValue("");
                log("Editor limpo", "info");
            }
        }
        
        function saveAllScripts() {
            if (scripts.length === 0) {
                log("Nenhum script para exportar", "warning");
                return;
            }
            
            const content = scripts.map((script, index) => 
                `=== ${script.name} ===\n${script.content}\n\n`
            ).join('');
            
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `averionx-scripts-${new Date().toISOString().split('T')[0]}.txt`;
            a.click();
            URL.revokeObjectURL(url);
            
            log(`${scripts.length} scripts exportados`, "success");
        }
        
        /* ================= LOGS FUNCTIONS ================= */
        function listenLogs() {
            if (!EXECUTOR_ID) return;
            
            db.ref(`executors/${EXECUTOR_ID}/logs`).limitToLast(20).on("child_added", snapshot => {
                const logData = snapshot.val();
                log(logData.msg, logData.type);
            });
        }
        
        function log(message, type = "info") {
            const logBox = document.getElementById('logBox');
            const timestamp = new Date().toLocaleTimeString();
            
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            logEntry.innerHTML = `
                <div style="color: #a0a0c0; font-size: 0.8rem; margin-bottom: 5px;">${timestamp}</div>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span style="font-weight: 700; color: ${getLogColor(type)}; font-size: 0.85rem; min-width: 60px;">
                        ${type.toUpperCase()}
                    </span>
                    <span>${message}</span>
                </div>
            `;
            
            logBox.prepend(logEntry);
            logs.unshift({ time: timestamp, type, message });
            
            if (logs.length > 100) logs.pop();
            logBox.scrollTop = 0;
        }
        
        function getLogColor(type) {
            switch(type) {
                case 'error': return 'var(--danger)';
                case 'warning': return 'var(--warning)';
                case 'success': return 'var(--success)';
                case 'info': return 'var(--info)';
                case 'exec': return 'var(--primary)';
                default: return 'var(--light)';
            }
        }
        
        function clearLogs() {
            if (confirm("Limpar todos os logs?")) {
                document.getElementById('logBox').innerHTML = '';
                logs = [];
                log("Logs limpos", "info");
            }
        }
        
        function exportLogs() {
            if (logs.length === 0) {
                log("Não há logs para exportar", "warning");
                return;
            }
            
            const content = logs.map(l => `[${l.time}] [${l.type}] ${l.message}`).join('\n');
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `averionx-logs-${new Date().toISOString().split('T')[0]}.txt`;
            a.click();
            URL.revokeObjectURL(url);
            
            log("Logs exportados", "success");
        }
        
        /* ================= HELPER FUNCTIONS ================= */
        function updatePlayersCount(count) {
            document.getElementById('playersOnline').textContent = count;
        }
        
        /* ================= UI FUNCTIONS ================= */
        function showSection(sectionId) {
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
            
            if (sectionId === 'editor' && editor) {
                setTimeout(() => {
                    if (editor && typeof editor.layout === 'function') {
                        editor.layout();
                    }
                }, 100);
            }
            
            if (sectionId === 'players') {
                setTimeout(() => {
                    renderAllActions();
                }, 50);
            }
            
            // Reset dashboard scroll position when switching to dashboard
            if (sectionId === 'dashboard') {
                setTimeout(() => {
                    const dashboardContent = document.querySelector('.dashboard-content');
                    if (dashboardContent) {
                        dashboardContent.scrollTop = 0;
                    }
                }, 50);
            }
        }
        
        /* ================= KEYBOARD SHORTCUTS ================= */
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === 'Enter') {
                e.preventDefault();
                if (document.getElementById('editor').classList.contains('active')) {
                    execute();
                }
            }
            
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                if (document.getElementById('editor').classList.contains('active')) {
                    saveCurrentScript();
                }
            }
            
            if (e.ctrlKey && e.key === 'l') {
                e.preventDefault();
                if (document.getElementById('logs').classList.contains('active')) {
                    clearLogs();
                }
            }
            
            if (e.ctrlKey && e.key === 'e') {
                e.preventDefault();
                if (document.getElementById('editor').classList.contains('active')) {
                    clearEditor();
                }
            }
            
            // Atalho para alternar modo: Ctrl+M
            if (e.ctrlKey && e.key === 'm') {
                e.preventDefault();
                if (document.getElementById('editor').classList.contains('active')) {
                    const newMode = MODE === 'clientside' ? 'serverside' : 'clientside';
                    setMode(newMode);
                }
            }
            
            if (e.altKey && e.key >= '1' && e.key <= '5') {
                e.preventDefault();
                const sections = ['dashboard', 'editor', 'script-hub', 'players', 'logs'];
                const index = parseInt(e.key) - 1;
                if (index < sections.length) {
                    const navButtons = document.querySelectorAll('.nav-btn');
                    if (navButtons[index]) {
                        navButtons[index].click();
                    }
                }
            }
        });
        
        /* ================= INITIALIZATION ================= */
        window.addEventListener('load', () => {
            log("Sistema AverionX Dashboard v3.0 inicializado", "info");
            log("Aguardando autenticação...", "info");
            log("Use chaves válidas do sistema Firebase", "warning");
            
            // Disable body scroll
            document.body.style.overflow = 'hidden';
            
            // Initialize scroll system
            initializeScrollSystem();
            
            // Inicializar seletor de modo
            setTimeout(() => {
                if (document.getElementById('modeClientBtn')) {
                    setMode('clientside');
                }
            }, 100);
        });
        
        function initializeScrollSystem() {
            // Garantir que o scroll funcione corretamente
            const style = document.createElement('style');
            style.textContent = `
                .action-scroll {
                    overflow-x: auto !important;
                    overflow-y: hidden !important;
                }
                
                .action-scroll-container {
                    overflow: hidden !important;
                }
                
                /* Remove scrollbar from body */
                body::-webkit-scrollbar {
                    display: none;
                }
                
                body {
                    -ms-overflow-style: none;
                    scrollbar-width: none;
                }
            `;
            document.head.appendChild(style);
        }
    </script>
</body>
</html>
